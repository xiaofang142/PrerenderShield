# 1. 简化站点管理

## 1.1 修改配置结构
- **文件**: `internal/config/config.go`
- **修改内容**:
  - 在 `SiteConfig` 中新增 `Mode` 字段，类型为字符串，支持 "proxy"、"static"、"redirect"
  - 修改 `ProxyConfig` 结构，简化为只包含 `TargetURL` 字段
  - 在 `SiteConfig` 中新增 `RedirectConfig` 字段，包含 `StatusCode` 和 `TargetURL`

## 1.2 修改 API 端点
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 更新站点添加 API (`POST /api/v1/sites`)，添加域名验证（只允许127.0.0.1或localhost）
  - 添加端口可用性检测逻辑
  - 更新站点更新 API (`PUT /api/v1/sites/:name`)，同样添加域名验证和端口检测
  - 修改站点服务器启动逻辑 (`startSiteServer` 函数)，根据模式处理不同请求

## 1.3 实现端口检测功能
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 实现 `isPortAvailable` 函数，检测端口是否被占用
  - 收集常用互联网端口，排除这些端口

# 2. 移除 SSL 功能

## 2.1 修改配置结构
- **文件**: `internal/config/config.go`
- **修改内容**:
  - 从 `SiteConfig` 中移除 `SSL` 字段
  - 删除 `SSLConfig` 结构体

## 2.2 修改 API 端点
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 删除 SSL 相关 API 端点
  - 移除证书管理器初始化和启动代码
  - 删除 SSL 相关的中间件和处理逻辑

## 2.3 清理依赖
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 移除 SSL 相关导入
  - 删除证书管理器相关代码

# 3. 添加系统日志功能

## 3.1 修改日志系统
- **文件**: `internal/logging/logger.go` (假设存在)
- **修改内容**:
  - 实现系统日志记录功能
  - 支持记录用户操作日志

## 3.2 新增 API 端点
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 新增系统日志列表 API (`GET /api/v1/logs`)
  - 支持分页查询

## 3.3 记录用户操作
- **文件**: `cmd/api/main.go`
- **修改内容**:
  - 在所有用户操作 API 中添加日志记录
  - 记录操作类型、操作人、操作内容、操作结果等信息

# 4. 修改前端界面

## 4.1 更新站点管理界面
- **文件**: `web/src/pages/SiteManagement.vue` (假设存在)
- **修改内容**:
  - 更新站点添加表单，添加模式选择
  - 移除 SSL 相关配置项
  - 添加域名验证提示
  - 更新端口输入框，添加常用端口排除逻辑

## 4.2 新增系统日志页面
- **文件**: `web/src/pages/SystemLogs.vue` (新建)
- **修改内容**:
  - 实现系统日志列表展示
  - 支持分页功能
  - 展示操作类型、操作人、操作时间、操作结果等信息

# 5. 测试和验证

## 5.1 功能测试
- 测试站点添加功能，验证域名和端口限制
- 测试不同模式的站点配置
- 测试站点更新和删除功能
- 测试系统日志记录功能

## 5.2 性能测试
- 测试端口检测功能的性能
- 测试系统日志查询的性能

## 5.3 安全测试
- 验证域名限制的安全性
- 验证端口检测的准确性

# 6. 部署和发布

- 更新文档，说明简化后的功能
- 提供部署指南
- 发布新版本

这个计划将按照用户需求，简化站点管理，移除SSL功能，并添加系统日志记录功能，同时保证系统的稳定性和安全性。
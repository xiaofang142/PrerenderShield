# PrerenderShield 配置文件

# 服务器配置
server:
  address: "0.0.0.0"
  api_port: 9598
  console_port: 9597
  # API公网地址，用于控制台前端访问API
  public_api_url: "${API_PUBLIC_URL:-http://localhost:9598}"

# 目录配置
dirs:
  data_dir: ./data
  static_dir: ./static
  certs_dir: ./certs
  admin_static_dir: ./web/dist

# 缓存配置
cache:
  type: "redis"
  # Redis连接配置，支持环境变量替换
  redis_url: "localhost:6379"
  memory_size: 1000

# 站点配置
sites:
  - id: "site1"
    name: "example-site"
    domains:
      - "example.com"
    port: 8082
    mode: "static"
    proxy:
      target_url: ""
    redirect:
      status_code: 0
      target_url: ""
    firewall:
      enabled: false
      rules_path: "./rules"
      action:
        default_action: "block"
        block_message: "Request blocked by firewall"
      geoip:
        enabled: false
        allow_list: []
        block_list: []
      rate_limit:
        enabled: false
        requests: 100
        window: 60
        ban_time: 3600
    prerender:
      enabled: true
      pool_size: 5
      min_pool_size: 2
      max_pool_size: 20
      timeout: 30
      cache_ttl: 3600
      idle_timeout: 300
      dynamic_scaling: true
      scaling_factor: 0.5
      scaling_interval: 60
      preheat:
        enabled: false
        sitemap_url: ""
        schedule: "0 0 * * *"
        concurrency: 5
        default_priority: 0
        max_depth: 3
      push:
        enabled: false
        baidu_api: "http://data.zz.baidu.com/urls"
        baidu_token: ""
        bing_api: "https://ssl.bing.com/webmaster/api.svc/json/SubmitUrl"
        bing_token: ""
        baidu_daily_limit: 1000
        bing_daily_limit: 1000
        push_domain: ""
        hour: 1
      crawler_headers:
        - "Googlebot"
        - "Bingbot"
        - "Baiduspider"
      use_default_headers: false
    routing:
      rules: []
    file_integrity:
      enabled: false
      check_interval: 300
      hash_algorithm: "sha256"